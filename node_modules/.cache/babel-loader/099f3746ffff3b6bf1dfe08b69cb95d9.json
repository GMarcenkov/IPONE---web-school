{"ast":null,"code":"var _jsxFileName = \"/home/george/Documents/Home/ipon-web-school/src/client/desktop/modules/login/Login.js\";\nimport React from \"react\";\nimport \"./Login.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGraduationCap } from \"@fortawesome/free-solid-svg-icons\";\nimport NavBar from \"../layout/navBar/NavBar\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({ ...this.state,\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.validateForm = data => {\n      const error = {};\n\n      if (data.password.length < 3) {\n        error.password = \"Паролата е твърде късо.\";\n      }\n\n      if (data.username.length < 3) {\n        error.username = \"Името е твърде късо.\";\n      }\n\n      return error;\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const errors = this.validateForm(this.state);\n      const isValid = Object.values(errors).filter(Boolean).length <= 0;\n\n      if (!isValid) {\n        this.setState({\n          error: errors\n        });\n        return;\n      }\n\n      this.setState({\n        request: \"\"\n      });\n      const login = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      await axios.post(\"http://localhost:5000/auth/\", login).then(req => {\n        console.log(req.data);\n        localStorage.setItem(\"jwt\", req.data.token);\n        req.data.user.isAdmin ? window.location.href = \"/admincp\" : window.location.href = \"/\"; // window.location.href = \"/admincp\";\n      }).catch(e => {\n        this.setState({\n          request: \"Failed to login\"\n        });\n      });\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      error: {}\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \" \", React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Ipon - web school\", React.createElement(FontAwesomeIcon, {\n      className: \"icon\",\n      icon: faGraduationCap,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"register_form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"\\u0412\\u0445\\u043E\\u0434\"), React.createElement(\"form\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, this.state.request && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, this.state.request), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"label_username\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"\\u0418\\u043C\\u0435\"), React.createElement(\"input\", {\n      className: \"input_form\",\n      name: \"username\",\n      value: this.state.username,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, this.state.error.username === undefined ? \"\" : this.state.error.username)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      className: \"label_password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u0430\"), React.createElement(\"input\", {\n      className: \"input_form\",\n      type: \"password\",\n      name: \"password\",\n      value: this.state.password,\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.state.error.password === undefined ? \"\" : this.state.error.password)), React.createElement(\"button\", {\n      onClick: this.handleSubmit,\n      className: \"submit\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"\\u0412\\u043B\\u0435\\u0437\")));\n  }\n\n}\n\nLogin.propTypes = {};\nexport default Login; // export default function Login(props) {\n//     const [email, setEmail] = useState(\"\");\n//     const [password, setPassword] = useState(\"\");\n//\n//     function validateForm() {\n//         return email.length > 0 && password.length > 0;\n//     }\n//\n//     function handleSubmit(event) {\n//         event.preventDefault();\n//     }\n//\n//     return (\n//         <div>\n//             <NavBar />\n//             <div className=\"Login\">\n//                 <form onSubmit={handleSubmit}>\n//                     <FormGroup controlId=\"email\" bsSize=\"large\">\n//                         <FormLabel>Имейл адрес</FormLabel>\n//                         <FormControl\n//                             autoFocus\n//                             type=\"email\"\n//                             value={email}\n//                             onChange={e => setEmail(e.target.value)}\n//                         />\n//                     </FormGroup>\n//                     <FormGroup controlId=\"password\" bsSize=\"large\">\n//                         <FormLabel>Парола</FormLabel>\n//                         <FormControl\n//                             value={password}\n//                             onChange={e => setPassword(e.target.value)}\n//                             type=\"password\"\n//                         />\n//                     </FormGroup>\n//                     <Button block bsSize=\"large\" disabled={!validateForm()} type=\"submit\">\n//                         Вход\n//                     </Button>\n//                 </form>\n//             </div>\n//         </div>\n//\n//     );\n// }","map":{"version":3,"sources":["/home/george/Documents/Home/ipon-web-school/src/client/desktop/modules/login/Login.js"],"names":["React","axios","FontAwesomeIcon","faGraduationCap","NavBar","Login","Component","constructor","props","handleChange","event","setState","state","target","name","value","validateForm","data","error","password","length","username","handleSubmit","e","preventDefault","errors","isValid","Object","values","filter","Boolean","request","login","post","then","req","console","log","localStorage","setItem","token","user","isAdmin","window","location","href","catch","render","undefined","propTypes"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Login.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGraduationCap } from \"@fortawesome/free-solid-svg-icons\";\nimport NavBar from \"../layout/navBar/NavBar\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      error: {}\n    };\n  }\n  handleChange = event => {\n    this.setState({\n      ...this.state,\n      [event.target.name]: event.target.value\n    });\n  };\n  validateForm = data => {\n    const error = {};\n\n    if (data.password.length < 3) {\n      error.password = \"Паролата е твърде късо.\";\n    }\n    if (data.username.length < 3) {\n      error.username = \"Името е твърде късо.\";\n    }\n\n    return error;\n  };\n\n  handleSubmit = async e => {\n    e.preventDefault();\n    const errors = this.validateForm(this.state);\n    const isValid = Object.values(errors).filter(Boolean).length <= 0;\n\n    if (!isValid) {\n      this.setState({ error: errors });\n      return;\n    }\n\n    this.setState({ request: \"\" });\n    const login = {\n      username: this.state.username,\n      password: this.state.password\n    };\n    await axios\n      .post(\"http://localhost:5000/auth/\", login)\n      .then(req => {\n        console.log(req.data);\n        localStorage.setItem(\"jwt\", req.data.token);\n\n        req.data.user.isAdmin\n          ? (window.location.href = \"/admincp\")\n          : (window.location.href = \"/\");\n\n        // window.location.href = \"/admincp\";\n      })\n      .catch(e => {\n        this.setState({ request: \"Failed to login\" });\n      });\n  };\n  render() {\n    return (\n      <div className=\"form\">\n        {\" \"}\n        <NavBar />\n        <div className=\"logo\">\n          Ipon - web school\n          <FontAwesomeIcon className=\"icon\" icon={faGraduationCap} />\n        </div>\n        <div className=\"register_form\">Вход</div>\n        <form className=\"login\">\n          {this.state.request && <div>{this.state.request}</div>}\n          <div>\n            <div className=\"label_username\">Име</div>\n            <input\n              className=\"input_form\"\n              name=\"username\"\n              value={this.state.username}\n              onChange={this.handleChange}\n            />\n            <div>\n              {this.state.error.username === undefined\n                ? \"\"\n                : this.state.error.username}\n            </div>\n          </div>\n          <div>\n            <label className=\"label_password\">Парола</label>\n            <input\n              className=\"input_form\"\n              type=\"password\"\n              name=\"password\"\n              value={this.state.password}\n              onChange={this.handleChange}\n            />\n            <div>\n              {this.state.error.password === undefined\n                ? \"\"\n                : this.state.error.password}\n            </div>\n          </div>\n          <button onClick={this.handleSubmit} className=\"submit\" type=\"submit\">\n            Влез\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {};\n\nexport default Login;\n\n// export default function Login(props) {\n//     const [email, setEmail] = useState(\"\");\n//     const [password, setPassword] = useState(\"\");\n//\n//     function validateForm() {\n//         return email.length > 0 && password.length > 0;\n//     }\n//\n//     function handleSubmit(event) {\n//         event.preventDefault();\n//     }\n//\n//     return (\n//         <div>\n//             <NavBar />\n//             <div className=\"Login\">\n//                 <form onSubmit={handleSubmit}>\n//                     <FormGroup controlId=\"email\" bsSize=\"large\">\n//                         <FormLabel>Имейл адрес</FormLabel>\n//                         <FormControl\n//                             autoFocus\n//                             type=\"email\"\n//                             value={email}\n//                             onChange={e => setEmail(e.target.value)}\n//                         />\n//                     </FormGroup>\n//                     <FormGroup controlId=\"password\" bsSize=\"large\">\n//                         <FormLabel>Парола</FormLabel>\n//                         <FormControl\n//                             value={password}\n//                             onChange={e => setPassword(e.target.value)}\n//                             type=\"password\"\n//                         />\n//                     </FormGroup>\n//                     <Button block bsSize=\"large\" disabled={!validateForm()} type=\"submit\">\n//                         Вход\n//                     </Button>\n//                 </form>\n//             </div>\n//         </div>\n//\n//     );\n// }\n"]},"metadata":{},"sourceType":"module"}