{"ast":null,"code":"var _jsxFileName = \"/home/george/Documents/Home/ipon-web-school/src/client/desktop/modules/login/Login.js\";\nimport React from \"react\";\nimport \"./Login.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGraduationCap } from \"@fortawesome/free-solid-svg-icons\";\nimport NavBar from \"../layout/navBar/NavBar\";\nimport LoginContainer from \"./components/LoginContainer\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = event => {\n      this.setState({ ...this.state,\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.validateForm = data => {\n      const error = {};\n\n      if (data.password.length < 3) {\n        error.password = \"Паролата е твърде късо.\";\n      }\n\n      if (data.username.length < 3) {\n        error.username = \"Името е твърде късо.\";\n      }\n\n      return error;\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const errors = this.validateForm(this.state);\n      const isValid = Object.values(errors).filter(Boolean).length <= 0;\n\n      if (!isValid) {\n        this.setState({\n          error: errors\n        });\n        return;\n      }\n\n      this.setState({\n        request: \"\"\n      });\n      const login = {\n        username: this.state.username,\n        password: this.state.password\n      };\n      await axios.post(\"http://localhost:5000/auth/\", login).then(req => {\n        console.log(req.data);\n        localStorage.setItem(\"jwt\", req.data.token);\n        req.data.user.isAdmin ? window.location.href = \"/admincp\" : window.location.href = \"/\"; // window.location.href = \"/admincp\";\n      }).catch(e => {\n        this.setState({\n          request: \"Failed to login\"\n        });\n      });\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      error: {}\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \" \", React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Ipon - web school\"), React.createElement(\"div\", {\n      className: \"register_form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \"\\u0412\\u0445\\u043E\\u0434\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(LoginContainer, {\n      password: this.state.password,\n      username: this.state.username,\n      request: this.state.request,\n      error: this.state.error,\n      handleChange: this.handleChange,\n      handleSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    })));\n  }\n\n}\n\nLogin.propTypes = {};\nexport default Login; // export default function Login(props) {\n//     const [email, setEmail] = useState(\"\");\n//     const [password, setPassword] = useState(\"\");\n//\n//     function validateForm() {\n//         return email.length > 0 && password.length > 0;\n//     }\n//\n//     function handleSubmit(event) {\n//         event.preventDefault();\n//     }\n//\n//     return (\n//         <div>\n//             <NavBar />\n//             <div className=\"Login\">\n//                 <form onSubmit={handleSubmit}>\n//                     <FormGroup controlId=\"email\" bsSize=\"large\">\n//                         <FormLabel>Имейл адрес</FormLabel>\n//                         <FormControl\n//                             autoFocus\n//                             type=\"email\"\n//                             value={email}\n//                             onChange={e => setEmail(e.target.value)}\n//                         />\n//                     </FormGroup>\n//                     <FormGroup controlId=\"password\" bsSize=\"large\">\n//                         <FormLabel>Парола</FormLabel>\n//                         <FormControl\n//                             value={password}\n//                             onChange={e => setPassword(e.target.value)}\n//                             type=\"password\"\n//                         />\n//                     </FormGroup>\n//                     <Button block bsSize=\"large\" disabled={!validateForm()} type=\"submit\">\n//                         Вход\n//                     </Button>\n//                 </form>\n//             </div>\n//         </div>\n//\n//     );\n// }","map":{"version":3,"sources":["/home/george/Documents/Home/ipon-web-school/src/client/desktop/modules/login/Login.js"],"names":["React","axios","FontAwesomeIcon","faGraduationCap","NavBar","LoginContainer","Login","Component","constructor","props","handleChange","event","setState","state","target","name","value","validateForm","data","error","password","length","username","handleSubmit","e","preventDefault","errors","isValid","Object","values","filter","Boolean","request","login","post","then","req","console","log","localStorage","setItem","token","user","isAdmin","window","location","href","catch","render","propTypes"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./Login.css\";\nimport axios from \"axios\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faGraduationCap } from \"@fortawesome/free-solid-svg-icons\";\nimport NavBar from \"../layout/navBar/NavBar\";\nimport LoginContainer from \"./components/LoginContainer\";\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: \"\",\n      password: \"\",\n      error: {}\n    };\n  }\n  handleChange = event => {\n    this.setState({\n      ...this.state,\n      [event.target.name]: event.target.value\n    });\n  };\n  validateForm = data => {\n    const error = {};\n\n    if (data.password.length < 3) {\n      error.password = \"Паролата е твърде късо.\";\n    }\n    if (data.username.length < 3) {\n      error.username = \"Името е твърде късо.\";\n    }\n\n    return error;\n  };\n\n  handleSubmit = async e => {\n    e.preventDefault();\n    const errors = this.validateForm(this.state);\n    const isValid = Object.values(errors).filter(Boolean).length <= 0;\n\n    if (!isValid) {\n      this.setState({ error: errors });\n      return;\n    }\n\n    this.setState({ request: \"\" });\n    const login = {\n      username: this.state.username,\n      password: this.state.password\n    };\n    await axios\n      .post(\"http://localhost:5000/auth/\", login)\n      .then(req => {\n        console.log(req.data);\n        localStorage.setItem(\"jwt\", req.data.token);\n\n        req.data.user.isAdmin\n          ? (window.location.href = \"/admincp\")\n          : (window.location.href = \"/\");\n\n        // window.location.href = \"/admincp\";\n      })\n      .catch(e => {\n        this.setState({ request: \"Failed to login\" });\n      });\n  };\n  render() {\n    return (\n      <div className=\"form\">\n        {\" \"}\n        <NavBar />\n        <div className=\"logo\">Ipon - web school</div>\n        <div className=\"register_form\">Вход</div>\n        <div >\n          {/*<FontAwesomeIcon className=\"icon\" icon={faGraduationCap} />*/}\n          <LoginContainer\n              password={this.state.password}\n              username={this.state.username}\n              request={this.state.request}\n              error={this.state.error}\n              handleChange={this.handleChange}\n              handleSubmit={this.handleSubmit}\n          />\n        </div>\n\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {};\n\nexport default Login;\n\n// export default function Login(props) {\n//     const [email, setEmail] = useState(\"\");\n//     const [password, setPassword] = useState(\"\");\n//\n//     function validateForm() {\n//         return email.length > 0 && password.length > 0;\n//     }\n//\n//     function handleSubmit(event) {\n//         event.preventDefault();\n//     }\n//\n//     return (\n//         <div>\n//             <NavBar />\n//             <div className=\"Login\">\n//                 <form onSubmit={handleSubmit}>\n//                     <FormGroup controlId=\"email\" bsSize=\"large\">\n//                         <FormLabel>Имейл адрес</FormLabel>\n//                         <FormControl\n//                             autoFocus\n//                             type=\"email\"\n//                             value={email}\n//                             onChange={e => setEmail(e.target.value)}\n//                         />\n//                     </FormGroup>\n//                     <FormGroup controlId=\"password\" bsSize=\"large\">\n//                         <FormLabel>Парола</FormLabel>\n//                         <FormControl\n//                             value={password}\n//                             onChange={e => setPassword(e.target.value)}\n//                             type=\"password\"\n//                         />\n//                     </FormGroup>\n//                     <Button block bsSize=\"large\" disabled={!validateForm()} type=\"submit\">\n//                         Вход\n//                     </Button>\n//                 </form>\n//             </div>\n//         </div>\n//\n//     );\n// }\n"]},"metadata":{},"sourceType":"module"}